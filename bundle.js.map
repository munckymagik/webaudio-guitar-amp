{"version":3,"file":null,"sources":["src/modules/Amplifer.js","src/modules/Distortion.js","src/modules/LFO.js","src/modules/SlapBackEcho.js","src/modules/WebAudioNodeWrapper.js","src/modules/Compressor.js","src/signalChain.js","src/sources/BufferSource.js","src/sources/loadSoundFileSource.js","src/shims/getUserMedia.js","src/sources/loadUserMediaSource.js","src/app.js","src/main.js"],"sourcesContent":["class Amplifer {\n  constructor(audioCtx, uiElement) {\n    const self = this;\n\n    this.gain = audioCtx.createGain();\n    this.volumeCtrl = uiElement.querySelector('.js-amplifier-volume');\n\n    self.setValue(self.volumeCtrl.value);\n    this.volumeCtrl.addEventListener('input', () => {\n      self.setValue(self.volumeCtrl.value);\n    });\n  }\n\n  connect(node) {\n    this.gain.connect(node);\n  }\n\n  setValue(gainValue) {\n    this.gain.gain.value = gainValue;\n  }\n\n  input() {\n    return this.gain;\n  }\n}\n\nexport default Amplifer\n","// Taken from: https://developer.mozilla.org/en-US/docs/Web/API/WaveShaperNode\nfunction makeDistortionCurve(amount) {\n  const k = typeof amount === 'number' ? amount : 50;\n  const n_samples = 44100;\n  const curve = new Float32Array(n_samples);\n  const deg = Math.PI / 180;\n  let i = 0;\n  let x;\n\n  for ( ; i < n_samples; ++i ) {\n    x = i * 2 / n_samples - 1;\n    curve[i] = ( 3 + k ) * x * 20 * deg / ( Math.PI + k * Math.abs(x) );\n  }\n\n  return curve;\n}\n\nclass Distortion {\n  constructor(audioCtx, uiElement) {\n    const self = this;\n\n    this.amountCtrl = uiElement.querySelector('.js-distortion-amount');\n    this.toneCtrl = uiElement.querySelector('.js-distortion-tone');\n\n    this.distortion = audioCtx.createWaveShaper();\n    this.distortion.curve = makeDistortionCurve(parseInt(this.amountCtrl.value));\n    this.distortion.oversample = '4x';\n\n    this.lowPass = audioCtx.createBiquadFilter();\n    this.lowPass.type = 'lowpass';\n    this.lowPass.frequency.value = parseInt(this.toneCtrl.value);\n\n    this.distortion.connect(this.lowPass);\n\n    this.amountCtrl.addEventListener('change', () => {\n      self.distortion.curve = makeDistortionCurve(parseInt(self.amountCtrl.value));\n    });\n    this.toneCtrl.addEventListener('input', () => {\n      self.lowPass.frequency.value = parseInt(self.toneCtrl.value);\n    });\n  }\n\n  connect(node) {\n    this.lowPass.connect(node);\n  }\n\n  input() {\n    return this.distortion;\n  }\n}\n\nexport default Distortion\n","function LFO(audioCtx, paramToModulate, uiElement) {\n  const self = this;\n\n  this.speedCtrl = uiElement.querySelector('.js-lfo-speed');\n  this.widthCtrl = uiElement.querySelector('.js-lfo-gain');\n\n  this.lfo = audioCtx.createOscillator();\n  this.lfoGain = audioCtx.createGain();\n\n  this.lfo.frequency.value = this.speedCtrl.value;\n  this.lfoGain.gain.value = this.widthCtrl.value;\n\n  this.lfo.connect(this.lfoGain);\n  this.lfoGain.connect(paramToModulate);\n  this.lfo.connect(paramToModulate);\n\n  this.speedCtrl.addEventListener('input', () => {\n    self.lfo.frequency.value = self.speedCtrl.value;\n  });\n  this.widthCtrl.addEventListener('input', () => {\n    self.lfoGain.gain.value = self.widthCtrl.value;\n  });\n\n  this.lfo.start();\n}\n\nexport default LFO\n","// http://www.html5rocks.com/en/tutorials/casestudies/jamwithchrome-audio/\n\nclass SlapBackEcho {\n  constructor(audioCtx, uiElement) {\n    this._input = audioCtx.createGain();\n    this.output = audioCtx.createGain();\n\n    const self = this, delay = audioCtx.createDelay(), feedback = audioCtx.createGain(), wetLevel = audioCtx.createGain();\n\n    this.uiWetControl = uiElement.querySelector('.js-echo-mix');\n    this.uiFeedbackControl = uiElement.querySelector('.js-echo-feedback');\n    this.uiDelayControl = uiElement.querySelector('.js-echo-delay');\n\n    this._input.gain.value = 1.0;\n    this.output.gain.value = 1.0;\n    delay.delayTime.value = parseFloat(this.uiDelayControl.value);\n    feedback.gain.value = parseFloat(this.uiFeedbackControl.value);\n    wetLevel.gain.value = this.uiWetControl.value;\n\n    this._input.connect(delay);\n    this._input.connect(this.output);\n\n    delay.connect(feedback);\n    delay.connect(wetLevel);\n    feedback.connect(delay);\n    wetLevel.connect(this.output);\n\n    this.uiWetControl.addEventListener('input', () => {\n      wetLevel.gain.value = self.uiWetControl.value;\n    });\n    this.uiFeedbackControl.addEventListener('input', () => {\n      feedback.gain.value = parseFloat(self.uiFeedbackControl.value);\n    });\n    this.uiDelayControl.addEventListener('input', () => {\n      delay.delayTime.value = parseFloat(self.uiDelayControl.value);\n    });\n  }\n\n  connect(node) {\n    this.output.connect(node);\n  }\n\n  setValue(gainValue) {\n    this.gain.gain.value = gainValue;\n  }\n\n  input() {\n    return this._input;\n  }\n}\n\nexport default SlapBackEcho\n","//\n// NodeWrapper (for the sake of a consistent interface when chaining stuff together)\n//\n\nclass WebAudioNodeWrapper {\n  constructor(webaudioNode) {\n    this.node = webaudioNode;\n  }\n\n  connect(node) {\n    this.node.connect(node);\n  }\n\n  input() {\n    return this.node;\n  }\n}\n\nexport default WebAudioNodeWrapper\n","// Based on code from: https://developer.mozilla.org/en-US/docs/Web/API/DynamicsCompressorNode\nfunction makeCompressor(audioCtx) {\n  const compressor = audioCtx.createDynamicsCompressor();\n  compressor.threshold.value = -50;\n  compressor.knee.value = 40;\n  compressor.ratio.value = 12;\n  compressor.attack.value = 0.25;\n  compressor.release.value = 0.25;\n\n  return compressor;\n}\n\nexport default makeCompressor\n","import Amplifer from './modules/Amplifer'\nimport Distortion from './modules/Distortion'\nimport LFO from './modules/LFO'\nimport SlapBackEcho from './modules/SlapBackEcho'\nimport WebAudioNodeWrapper from './modules/WebAudioNodeWrapper'\nimport makeCompressor from './modules/Compressor'\n\nfunction buildSignalChain(audioCtx) {\n  const distortion = new Distortion(audioCtx, document.querySelector(\"[data-module='distortion']\"));\n  const compressor = new WebAudioNodeWrapper(makeCompressor(audioCtx));\n  const echo = new SlapBackEcho(audioCtx, document.querySelector(\"[data-module='echo']\"));\n  const panner = new WebAudioNodeWrapper(audioCtx.createStereoPanner());\n  const lfo = new LFO(audioCtx, panner.input().pan, document.querySelector(\"[data-module='panner']\"));\n  const amplifier = new Amplifer(audioCtx, document.querySelector(\"[data-module='amplifier']\"));\n\n  distortion.connect(compressor.input());\n  compressor.connect(echo.input());\n  echo.connect(panner.input());\n  panner.connect(amplifier.input());\n  amplifier.connect(audioCtx.destination);\n\n  return {\n    distortion,\n    compressor,\n    echo,\n    panner,\n    lfo,\n    amplifier\n  };\n}\n\nexport default buildSignalChain\n","class BufferSource {\n  constructor(audioCtx, buffer, destination) {\n    this.audioCtx = audioCtx;\n    this.buffer = buffer;\n    this.destination = destination;\n    this.source = undefined;\n\n    this.play = this._play.bind(this);\n    this.stop = this._stop.bind(this);\n  }\n\n  _play() {\n    console.log('Playing ...');\n\n    if (this.source !== undefined) {\n      this.stop();\n    }\n\n    this.source = this.audioCtx.createBufferSource();\n    this.source.buffer = this.buffer;\n    this.source.connect(this.destination);\n    this.source.start(0);\n  }\n\n  _stop() {\n    console.log('Stopping.');\n\n    if (this.source === undefined) {\n      return;\n    }\n\n    this.source.stop();\n    this.source.disconnect();\n    this.source = undefined;\n  }\n}\n\nexport default BufferSource\n","import BufferSource from './BufferSource'\n\n// From http://www.html5rocks.com/en/tutorials/webaudio/intro/\nfunction loadSoundFile(context, url) {\n  return new Promise((resolve, fail) => {\n    const request = new XMLHttpRequest();\n    request.open('GET', url, true);\n    request.responseType = 'arraybuffer';\n\n    // Decode asynchronously\n    request.onload = () => {\n      context.decodeAudioData(request.response, resolve, fail);\n    };\n\n    request.send();\n  });\n}\n\nfunction loadSoundFileSource(audioCtx, signalChain) {\n  return loadSoundFile(audioCtx, '/guitar.mp3').then(buffer => {\n    console.log('Loaded OK.');\n    const source = new BufferSource(audioCtx, buffer, signalChain.distortion.input());\n\n    console.log('Enabling play/stop');\n    document.querySelector('.js-play').addEventListener('click', source.play);\n    document.querySelector('.js-stop').addEventListener('click', source.stop);\n\n    return source;\n  });\n}\n\nexport default loadSoundFileSource\n","navigator.getUserMedia = (navigator.getUserMedia ||\n                          navigator.webkitGetUserMedia ||\n                          navigator.mozGetUserMedia ||\n                          navigator.msGetUserMedia);\n","import '../shims/getUserMedia'\n\nfunction loadUserMediaSource(audioCtx, signalChain) {\n  const options = {\n    audio: {\n      optional: [\n        { echoCancellation: false }\n      ]\n    }\n  };\n\n  return new Promise((resolve, fail) => {\n    navigator.getUserMedia(\n      options,\n      stream => {\n        console.log('Loading stream.');\n\n        const source = audioCtx.createMediaStreamSource(stream);\n        source.connect(signalChain.distortion.input());\n\n        resolve(source);\n      },\n      (...args) => {\n        fail(args);\n      }\n    );\n  });\n}\n\nexport default loadUserMediaSource\n","import buildSignalChain from './signalChain'\nimport loadSoundFileSource from './sources/loadSoundFileSource'\nimport loadUserMediaSource from './sources/loadUserMediaSource'\n\nfunction app() {\n  console.log('Starting application.');\n\n  const audioCtx = window.__audioCtx = new AudioContext();\n  const signalChain = window.__signalChain = buildSignalChain(audioCtx);\n\n  window.__soundFilePromise = loadSoundFileSource(audioCtx, signalChain);\n  window.__guitarInputPromise = loadUserMediaSource(audioCtx, signalChain);\n\n  Promise.all([window.__soundFilePromise, window.__guitarInputPromise], (...args) => {\n    console.log('All sources loaded');\n    console.log(args);\n  }).catch(error => {\n    console.log('Error source loading failed', error);\n  });\n};\n\nexport default app\n","import app from './app'\n\nwindow.addEventListener('load', app)\n"],"names":["Amplifer","audioCtx","uiElement","self","gain","createGain","volumeCtrl","querySelector","setValue","value","addEventListener","node","connect","gainValue","makeDistortionCurve","amount","k","n_samples","curve","Float32Array","deg","Math","PI","i","x","abs","Distortion","amountCtrl","toneCtrl","distortion","createWaveShaper","parseInt","oversample","lowPass","createBiquadFilter","type","frequency","LFO","paramToModulate","speedCtrl","widthCtrl","lfo","createOscillator","lfoGain","start","SlapBackEcho","_input","output","delay","createDelay","feedback","wetLevel","uiWetControl","uiFeedbackControl","uiDelayControl","delayTime","parseFloat","WebAudioNodeWrapper","webaudioNode","makeCompressor","compressor","createDynamicsCompressor","threshold","knee","ratio","attack","release","buildSignalChain","document","echo","panner","createStereoPanner","input","pan","amplifier","destination","BufferSource","buffer","source","undefined","play","_play","bind","stop","_stop","log","createBufferSource","disconnect","loadSoundFile","context","url","Promise","resolve","fail","request","XMLHttpRequest","open","responseType","onload","decodeAudioData","response","send","loadSoundFileSource","signalChain","then","navigator","getUserMedia","webkitGetUserMedia","mozGetUserMedia","msGetUserMedia","loadUserMediaSource","options","echoCancellation","createMediaStreamSource","stream","args","app","window","__audioCtx","AudioContext","__signalChain","__soundFilePromise","__guitarInputPromise","all","catch","error"],"mappings":"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"}